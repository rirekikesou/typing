<!-- 見えない部分 -->
<html>
    
<head>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Kalam:wght@300;400;700&family=M+PLUS+Rounded+1c:wght@100;300;400;500;700;800;900&display=swap" rel="styl
<style>
    .kalam-light {
  font-family: "Kalam", cursive;
  font-weight: 300;
  font-style: normal;
}

.kalam-regular {
  font-family: "Kalam", cursive;
  font-weight: 400;
  font-style: normal;
}

.kalam-bold {
  font-family: "Kalam", cursive;
  font-weight: 700;
  font-style: normal;
}


    ul{
        list-style: none;
    }
    li{
        list-style: none;
    }
</style>
</head>
<!-- ↓ここから見える部分↓ -->
<body>
    <script>
    
        let Q = ["immediately", "unfortunately","triskaidekaphobia"];//問題文
        let Q_No = Math.floor( Math.random() * Q.length);//問題をランダムで出題する
    
        let Q_i = 0;//回答初期値・現在単語どこまで合っているか判定している文字番号
        let Q_l = Q[Q_No].length;//計算用の文字の長さ
    
        let pressd = false;
        let pressr = false;
        let owari = false;

        let correct = 0;
        let total = 0;
        let uncorrect = 0;

        let tmp1;
        let seconds = 10;

        const activeKeys = ["q","w","e","r","t","y","u","i","o","p","a","s","d","f","g","h","j","k","l","z","x","c","v","b","n","m"," ","1","2","3","4","5","6","7","8","9","0"];
    window.addEventListener("keydown", push_Keydown);
    
    function push_Keydown(event){
        if (owari == true) return;
        if (pressd == false) { 
            let keyCode = event.key;
            if (!activeKeys.includes(keyCode)) return;
            pressd = true;
            document.getElementById("start").innerHTML = "3";
            setTimeout(function() {
                document.getElementById("start").innerHTML = "2";
                setTimeout(function() {
                    document.getElementById("start").innerHTML = "1";
                    setTimeout(function() {
                        document.getElementById("start").innerHTML = "START";
                        setTimeout(function() {
                            pressr = true;
                            document.getElementById("start").innerHTML = Q[Q_No].substring(0,Q_i) + '<font color="red">' + Q[Q_No].substring(Q_i, Q_i+1) + '</font><font color="black">' +Q[Q_No].substring(Q_i+1)+ '</font>';  //問題を書き出す
                            
                            document.getElementById("sec").innerHTML = 'seconds: <font color="red">' + seconds; 
                            const interval = setInterval(function() {
                                if (owari == false) {
                                    if (seconds == 1) owari = true;
                                    seconds--;
                                    document.getElementById("sec").innerHTML = 'remain time: <font color="red">' + seconds;  //問題を書き出す
                                } else {
                                    document.getElementById("start").innerHTML = '終了!'
                                    clearInterval(interval);
                                    setTimeout(function() {
                                        let ritu1 = Math.round(parseInt(correct) / parseInt(total) * 10000) / 100;
                                        document.getElementById("miss").innerHTML = "";
                                        document.getElementById("corr").innerHTML = "";
                                        document.getElementById("tota").innerHTML = "";
                                        document.getElementById("sec").innerHTML = "";
                                        document.getElementById("start").innerHTML = '結果<br><center><ul><li type="disc">- トータルタイプ数: <font color="red">'+ total+'</font></li><li type="disc">- 正解タイプ率: <font color="red">'+ ritu1+'% </font></li><li type="disc">- 正解タイプ数: <font color="red">'+correct+'</font></li><li>- 不正解タイプ数: <font color="red">'+uncorrect+'</font></li></ul></center>';
                                    },0);
                                }
                            }, 1000)
                        }, 1000);
                    }, 1000);
                }, 1000);
            }, 1000);
        }

        if (pressr == true) {
            let keyCode = event.key;
            if (!activeKeys.includes(keyCode)) return;
            if (Q_l == Q_l-Q_i){
                document.getElementById("start").innerHTML = Q[Q_No].substring(0,Q_i) + '<font color="red">' + Q[Q_No].substring(Q_i, Q_i+1) + '</font><font color="black">' +Q[Q_No].substring(Q_i+1)+ '</font>';  //問題を書き出す
            }

            tmp1 = parseInt(total)
                total = tmp1 + 1;

                document.getElementById("tota").innerHTML = 'Total type: <font color="red">' + total+ '</font>'

            if (Q[Q_No].charAt(Q_i) == keyCode) { //押したキーが合っていたら

                tmp1 = parseInt(correct)
                correct = tmp1 + 1;

                document.getElementById("corr").innerHTML = 'Correct type: <font color="red">' + correct+ '</font>'

                Q_i++; //判定する文章に１足す
                document.getElementById("start").innerHTML = Q[Q_No].substring(0,Q_i) + '<font color="red">' + Q[Q_No].substring(Q_i, Q_i+1) + '</font><font color="black">' +Q[Q_No].substring(Q_i+1) + '</font>'; //問題を書き出す
                if (Q_l-Q_i === 0){ //全部正解したら
                    Q_No = Math.floor( Math.random() * Q.length);//問題をランダムで出題する
                    Q_i = 0;//回答初期値・現在どこまで合っているか判定している文字番号
                    Q_l = Q[Q_No].length;//計算用の文字の長さ
                    document.getElementById("start").innerHTML = Q[Q_No].substring(0,Q_i) + '<font color="red">' + Q[Q_No].substring(Q_i, Q_i+1) + '</font><font color="black">' +Q[Q_No].substring(Q_i+1)+ '</font>'; //新たな問題を書き出す
                }
            } else {
                tmp1 = parseInt(uncorrect)
                uncorrect = tmp1 + 1;

                document.getElementById("miss").innerHTML = 'Miss: <font color="red">' + uncorrect+ '</font>'
            }
        }
    
    }
    
    </script>
    <br>
<h2 id="miss" class="text">Miss: <font color="red">0</font></h2>
<h2 id="corr" class="text">Correct type: <font color="red">0</font></h2>
<h2 id="tota" class="text">Total type: <font color="red">0</font></h2>
<h2 id="sec" class="text">remain time: <font color="red">30</font></h2>
<center>
    <br>
    <br>
<h1 id="start" class="text">何かキーを押して下さい</h1>
</center>

</body>
</html>